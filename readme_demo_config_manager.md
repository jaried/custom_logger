# é…ç½®ç®¡ç†å™¨æ¼”ç¤ºæŒ‡å—

æœ¬ç›®å½•åŒ…å«é…ç½®ç®¡ç†å™¨çš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºï¼Œå±•ç¤ºäº†æ‰€æœ‰ä¸»è¦ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯ã€‚

## æ¼”ç¤ºæ–‡ä»¶è¯´æ˜

### 1. `demo_config_manager_basic.py` - åŸºæœ¬åŠŸèƒ½æ¼”ç¤º
å±•ç¤ºé…ç½®ç®¡ç†å™¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼š
- **åŸºæœ¬æ“ä½œ**ï¼šå±æ€§è®¾ç½®ã€è·å–ã€åµŒå¥—é…ç½®
- **ç±»å‹æ”¯æŒ**ï¼šè·¯å¾„ç±»å‹ã€ç±»å‹è½¬æ¢ã€ç±»å‹æç¤º
- **æ‰¹é‡æ“ä½œ**ï¼šupdateæ–¹æ³•ã€å¤æ‚åµŒå¥—ç»“æ„
- **ä¿å­˜åŠ è½½**ï¼šæ‰‹åŠ¨ä¿å­˜ã€é‡æ–°åŠ è½½

```bash
python src/demo/demo_config_manager_basic.py
```

### 2. `demo_config_manager_autosave.py` - è‡ªåŠ¨ä¿å­˜æ¼”ç¤º
å±•ç¤ºæ™ºèƒ½è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼š
- **åŸºæœ¬è‡ªåŠ¨ä¿å­˜**ï¼šå»¶è¿Ÿä¿å­˜ã€æ–‡ä»¶éªŒè¯
- **å»¶è¿Ÿæ§åˆ¶**ï¼šå¯é…ç½®å»¶è¿Ÿã€è¿ç»­ä¿®æ”¹åˆå¹¶
- **æ€§èƒ½ç‰¹æ€§**ï¼šå¤§é‡æ•°æ®å¤„ç†ã€æ•°æ®å®Œæ•´æ€§

```bash
python src/demo/demo_config_manager_autosave.py
```

### 3. `demo_config_manager_advanced.py` - é«˜çº§åŠŸèƒ½æ¼”ç¤º
å±•ç¤ºé«˜çº§é…ç½®ç®¡ç†ç‰¹æ€§ï¼š
- **å¿«ç…§å’Œæ¢å¤**ï¼šé…ç½®çŠ¶æ€ç®¡ç†ã€ç‰ˆæœ¬å›æ»š
- **ä¸´æ—¶ä¸Šä¸‹æ–‡**ï¼šä¸´æ—¶é…ç½®ä¿®æ”¹ã€è‡ªåŠ¨æ¢å¤
- **IDç”Ÿæˆ**ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ã€å®éªŒç®¡ç†ã€ä¼šè¯ç®¡ç†

```bash
python src/demo/demo_config_manager_advanced.py
```

### 4. `demo_config_manager_file_operations.py` - æ–‡ä»¶æ“ä½œæ¼”ç¤º
å±•ç¤ºæ–‡ä»¶ç³»ç»Ÿç›¸å…³åŠŸèƒ½ï¼š
- **æ–‡ä»¶ç›‘è§†**ï¼šå®æ—¶æ–‡ä»¶å˜åŒ–æ£€æµ‹ã€è‡ªåŠ¨é‡æ–°åŠ è½½
- **å¤šé…ç½®æ–‡ä»¶**ï¼šç‹¬ç«‹é…ç½®ç®¡ç†ã€é…ç½®éš”ç¦»
- **å¤‡ä»½æ¢å¤**ï¼šé…ç½®å¤‡ä»½ã€æŸåæ¢å¤

```bash
python src/demo/demo_config_manager_file_operations.py
```

### 5. `demo_config_manager_all.py` - å®Œæ•´æ¼”ç¤º
è¿è¡Œæ‰€æœ‰æ¼”ç¤ºçš„äº¤äº’å¼ç¨‹åºï¼š
- æŒ‰é¡ºåºè¿è¡Œæ‰€æœ‰æ¼”ç¤º
- äº¤äº’å¼æ§åˆ¶æ¼”ç¤ºè¿›åº¦
- å®Œæ•´åŠŸèƒ½æ€»è§ˆ

```bash
python src/demo/demo_config_manager_all.py
```

## å¿«é€Ÿå¼€å§‹

### è¿è¡Œå•ä¸ªæ¼”ç¤º
```bash
# åŸºæœ¬åŠŸèƒ½
python src/demo/demo_config_manager_basic.py

# è‡ªåŠ¨ä¿å­˜
python src/demo/demo_config_manager_autosave.py

# é«˜çº§åŠŸèƒ½
python src/demo/demo_config_manager_advanced.py

# æ–‡ä»¶æ“ä½œ
python src/demo/demo_config_manager_file_operations.py
```

### è¿è¡Œå®Œæ•´æ¼”ç¤º
```bash
python src/demo/demo_config_manager_all.py
```

## æ¼”ç¤ºç‰¹ç‚¹

### ğŸ¯ å®ç”¨æ€§
- æ‰€æœ‰æ¼”ç¤ºéƒ½åŸºäºçœŸå®ä½¿ç”¨åœºæ™¯
- å±•ç¤ºæœ€ä½³å®è·µå’Œå¸¸è§æ¨¡å¼
- åŒ…å«é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ

### ğŸ”§ å¯å®šåˆ¶æ€§
- ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ï¼Œä¸å½±å“ç³»ç»Ÿ
- å¯ç‹¬ç«‹è¿è¡Œæ¯ä¸ªæ¼”ç¤º
- æ”¯æŒä¸­æ–­å’Œæ¢å¤

### ğŸ“š æ•™è‚²æ€§
- è¯¦ç»†çš„è¾“å‡ºè¯´æ˜
- é€æ­¥æ¼”ç¤ºè¿‡ç¨‹
- ç»“æœéªŒè¯å’Œè§£é‡Š

### ğŸ§¹ æ¸…ç†æ€§
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- èµ„æºç®¡ç†å’Œå¼‚å¸¸å¤„ç†
- ä¸ç•™ä¸‹æ¼”ç¤ºç—•è¿¹

## æ¼”ç¤ºå†…å®¹æ¦‚è§ˆ

| åŠŸèƒ½åˆ†ç±» | ä¸»è¦ç‰¹æ€§ | æ¼”ç¤ºæ–‡ä»¶ |
|---------|---------|---------|
| **åŸºç¡€æ“ä½œ** | å±æ€§è®¿é—®ã€åµŒå¥—é…ç½®ã€ç±»å‹æ”¯æŒ | `demo_config_manager_basic.py` |
| **è‡ªåŠ¨ä¿å­˜** | æ™ºèƒ½ä¿å­˜ã€å»¶è¿Ÿæ§åˆ¶ã€æ€§èƒ½ä¼˜åŒ– | `demo_config_manager_autosave.py` |
| **é«˜çº§ç‰¹æ€§** | å¿«ç…§æ¢å¤ã€ä¸´æ—¶ä¸Šä¸‹æ–‡ã€IDç”Ÿæˆ | `demo_config_manager_advanced.py` |
| **æ–‡ä»¶æ“ä½œ** | æ–‡ä»¶ç›‘è§†ã€å¤šé…ç½®ã€å¤‡ä»½æ¢å¤ | `demo_config_manager_file_operations.py` |
| **å®Œæ•´ä½“éªŒ** | äº¤äº’å¼å…¨åŠŸèƒ½æ¼”ç¤º | `demo_config_manager_all.py` |

## ä½¿ç”¨å»ºè®®

1. **æ–°ç”¨æˆ·**ï¼šä» `demo_config_manager_basic.py` å¼€å§‹
2. **è¯„ä¼°æ€§èƒ½**ï¼šè¿è¡Œ `demo_config_manager_autosave.py`
3. **äº†è§£é«˜çº§åŠŸèƒ½**ï¼šæŸ¥çœ‹ `demo_config_manager_advanced.py`
4. **ç”Ÿäº§ç¯å¢ƒè¯„ä¼°**ï¼šè¿è¡Œ `demo_config_manager_file_operations.py`
5. **å®Œæ•´ä½“éªŒ**ï¼šä½¿ç”¨ `demo_config_manager_all.py`

## æŠ€æœ¯è¦æ±‚

- Python 3.7+
- PyYAML
- å·²å®‰è£…é…ç½®ç®¡ç†å™¨åŒ…ï¼š`pip install -e .`

## æ•…éšœæ’é™¤

å¦‚æœæ¼”ç¤ºè¿è¡Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š

1. **å®‰è£…æ£€æŸ¥**
   ```bash
   pip list | grep config-manager
   ```

2. **ä¾èµ–æ£€æŸ¥**
   ```bash
   pip install -r requirements.txt  # å¦‚æœæœ‰çš„è¯
   ```

3. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿æœ‰ä¸´æ—¶æ–‡ä»¶åˆ›å»ºæƒé™

4. **è·¯å¾„æ£€æŸ¥**ï¼šä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œæ¼”ç¤º

## ä»£ç ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```python
from config_manager import get_config_manager

# è·å–é…ç½®ç®¡ç†å™¨
cfg = get_config_manager()

# è®¾ç½®é…ç½®
cfg.app_name = "MyApp"
cfg.database.host = "localhost"
cfg.database.port = 5_432

# è‡ªåŠ¨ä¿å­˜ï¼é…ç½®å·²æŒä¹…åŒ–
```

### é«˜çº§åŠŸèƒ½
```python
# åˆ›å»ºå¿«ç…§
snapshot = cfg.snapshot()

# ä¿®æ”¹é…ç½®
cfg.debug_mode = True

# æ¢å¤å¿«ç…§
cfg.restore(snapshot)

# ä¸´æ—¶é…ç½®
with cfg.temporary({"debug_mode": True}) as temp_cfg:
    # ä¸´æ—¶å¯ç”¨è°ƒè¯•æ¨¡å¼
    print(f"è°ƒè¯•æ¨¡å¼: {temp_cfg.debug_mode}")
# è‡ªåŠ¨æ¢å¤åŸå§‹é…ç½®
```

### ç±»å‹å®‰å…¨
```python
from pathlib import Path

# è®¾ç½®è·¯å¾„ç±»å‹
cfg.set("log_path", Path("/var/log"), type_hint=Path)

# ç±»å‹è½¬æ¢
port = cfg.get("server.port", as_type=int)
timeout = cfg.get("timeout", as_type=float)
```

## æœ€ä½³å®è·µ

### 1. é…ç½®ç»„ç»‡
```python
# æ¨èçš„é…ç½®ç»“æ„
cfg.app.name = "MyApp"
cfg.app.version = "1.0.0"

cfg.database.host = "localhost"
cfg.database.port = 5_432

cfg.logging.level = "INFO"
cfg.logging.path = Path("/var/log/myapp")
```

### 2. é”™è¯¯å¤„ç†
```python
# å®‰å…¨çš„é…ç½®è®¿é—®
database_url = cfg.get("database.url", default="sqlite:///default.db")
max_connections = cfg.get("database.max_connections", default=10, as_type=int)
```

### 3. æ€§èƒ½ä¼˜åŒ–
```python
# æ‰¹é‡æ›´æ–°ä»¥å‡å°‘è‡ªåŠ¨ä¿å­˜æ¬¡æ•°
cfg.update({
    "server.host": "0.0.0.0",
    "server.port": 8_080,
    "server.workers": 4
})
```

### 4. å¼€å‘ç¯å¢ƒé…ç½®
```python
# ä½¿ç”¨ä¸´æ—¶é…ç½®è¿›è¡Œæµ‹è¯•
with cfg.temporary({
    "database.url": "sqlite:///test.db",
    "debug_mode": True,
    "log_level": "DEBUG"
}) as test_cfg:
    # åœ¨æµ‹è¯•é…ç½®ä¸‹è¿è¡Œä»£ç 
    run_tests()
```

## æ‰©å±•åŠŸèƒ½

### è‡ªå®šä¹‰é…ç½®è·¯å¾„
```python
# æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®
cfg = get_config_manager(
    config_path="/path/to/custom/config.yaml",
    watch=True,          # å¯ç”¨æ–‡ä»¶ç›‘è§†
    autosave_delay=1.0   # 1ç§’è‡ªåŠ¨ä¿å­˜å»¶è¿Ÿ
)
```

### å¤šç¯å¢ƒé…ç½®
```python
import os

env = os.getenv("ENVIRONMENT", "development")
config_file = f"config_{env}.yaml"

cfg = get_config_manager(config_path=config_file)
```

## æ€§èƒ½æŒ‡æ ‡

| æ“ä½œç±»å‹ | å“åº”æ—¶é—´ | å†…å­˜å ç”¨ |
|---------|---------|---------|
| å±æ€§è®¾ç½® | < 1ms | æœ€å° |
| åµŒå¥—è®¿é—® | < 1ms | æœ€å° |
| è‡ªåŠ¨ä¿å­˜ | < 10ms | ä½ |
| æ–‡ä»¶é‡è½½ | < 50ms | ä¸­ç­‰ |
| å¿«ç…§åˆ›å»º | < 5ms | ä½ |

## æ”¯æŒå’Œåé¦ˆ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨æ¼”ç¤ºè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æ£€æŸ¥æ¼”ç¤ºè¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
3. æäº¤ Issue æˆ–å»ºè®®

## è®¸å¯è¯

æœ¬æ¼”ç¤ºä»£ç éµå¾ªä¸ä¸»é¡¹ç›®ç›¸åŒçš„è®¸å¯è¯ã€‚