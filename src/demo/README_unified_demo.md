# Custom Logger 统一演示系统

## 概述

`unified_demo_system.py` 是 Custom Logger 的统一演示系统，整合了所有功能演示、测试用例覆盖和使用说明。该系统替代了之前分散的多个demo文件，提供了完整、系统化的功能展示。

## 功能覆盖

### 1. 基础功能演示
- **日志级别测试**：debug, info, warning, error, critical
- **消息格式化**：字符串格式化、数字千位分隔符
- **异常日志记录**：exc_info参数使用

### 2. 高级功能演示
- **多模块日志管理**：不同模块的独立日志记录
- **嵌套函数调用**：多层函数调用的调用者识别
- **类方法调用**：面向对象编程中的日志记录

### 3. 多线程/多进程演示
- **多线程日志**：ThreadPoolExecutor并发日志记录
- **多进程日志**：ProcessPoolExecutor跨进程日志记录
- **并发安全性**：验证多线程/多进程环境下的日志安全性

### 4. 配置管理演示
- **配置文件加载**：YAML配置文件的读取和应用
- **配置项显示**：当前配置的查看和验证
- **调用链控制**：show_call_chain配置的效果展示

### 5. 调用者识别演示
- **直接调用**：主函数中的直接日志调用
- **函数调用**：普通函数中的日志调用
- **嵌套调用**：多层嵌套函数的调用者识别
- **类方法调用**：类实例方法中的日志调用

### 6. 边界测试演示
- **空消息测试**：空字符串日志消息
- **长消息测试**：超长字符串的处理
- **特殊字符测试**：特殊符号和字符的处理
- **Unicode测试**：多语言字符和表情符号
- **数字格式测试**：大数字和浮点数的格式化
- **None值测试**：空值的处理

### 7. 性能测试演示
- **大量日志测试**：100, 500, 1000条消息的性能测试
- **混合级别测试**：不同日志级别混合使用的性能
- **性能指标显示**：消息/秒的性能统计

### 8. 错误处理演示
- **异常捕获**：各种Python异常的日志记录
- **文件操作错误**：FileNotFoundError等IO异常
- **类型错误**：TypeError等类型相关异常
- **自定义异常**：用户定义异常的处理

### 9. 完整功能覆盖
- **应用程序模拟**：完整的应用程序生命周期
- **组件化日志**：多组件系统的日志管理
- **用户操作模拟**：真实业务场景的日志记录
- **并发用户处理**：多用户并发操作的日志记录

## 测试用例对应关系

### 与现有测试用例的对应关系

| 演示功能 | 对应测试用例 | 覆盖内容 |
|---------|-------------|----------|
| 基础功能演示 | tc0001-tc0003 | 基本日志级别、消息格式化 |
| 高级功能演示 | tc0004-tc0006 | 多模块、嵌套调用 |
| 多线程演示 | tc0012-tc0013 | 多线程环境日志记录 |
| 多进程演示 | tc0014-tc0015 | 多进程环境日志记录 |
| 配置管理演示 | tc0007-tc0009 | 配置加载、验证 |
| 调用者识别演示 | tc0010-tc0012 | 调用栈分析、调用者识别 |
| 边界测试演示 | tc0016-tc0020 | 边界条件、异常输入 |
| 性能测试演示 | tc0021-tc0025 | 性能基准、负载测试 |
| 错误处理演示 | tc0026-tc0030 | 异常处理、错误恢复 |

## 使用方法

### 1. 直接运行
```bash
python src/demo/unified_demo_system.py
```

### 2. 通过模块导入
```python
from src.demo.unified_demo_system import UnifiedDemoSystem

demo_system = UnifiedDemoSystem()
demo_system.run()
```

### 3. 运行特定演示
```python
demo_system = UnifiedDemoSystem()
demo_system._basic_demos()  # 运行基础功能演示
```

## 配置要求

演示系统使用全局配置文件 `src/config/config.yaml`，确保以下配置项正确设置：

```yaml
logger:
  global_console_level: "info"
  global_file_level: "debug"
  show_call_chain: true  # 启用调用链显示
  show_debug_call_stack: false
```

## 输出示例

### 调用链显示
```
[调用链] unified_demo_system.py:89(_basic_demos) -> logger.py:234(info) -> ...
[ 12345 | unified_ :   89] 2025-06-02 12:00:00 - 0:00:01.23 - info      - 这是普通信息
```

### 性能测试输出
```
    100 条消息: 0.045秒, 2,222.2 消息/秒
    500 条消息: 0.198秒, 2,525.3 消息/秒
  1,000 条消息: 0.387秒, 2,584.4 消息/秒
```

## 优势特点

1. **统一管理**：所有演示功能集中在一个系统中
2. **完整覆盖**：涵盖所有测试用例和功能点
3. **交互友好**：清晰的菜单系统和用户交互
4. **配置统一**：使用全局配置文件，避免重复配置
5. **错误处理**：完善的异常处理和错误恢复
6. **性能监控**：内置性能测试和指标显示

## 替代的旧文件

该统一系统替代了以下旧的demo文件：
- `demo_quick_start.py`
- `demo_advanced_features.py`
- `demo_comprehensive_custom_logger.py`
- `debug_call_stack_demo.py`
- `custom_logger_comprehensive/` 目录下的所有文件
- `worker_path_demo/` 目录下的所有文件

## 维护说明

1. **新功能添加**：在对应的演示方法中添加新的测试用例
2. **配置更新**：确保配置文件与演示需求保持同步
3. **测试覆盖**：新增功能需要在演示中体现
4. **文档更新**：功能变更时及时更新本文档

## 注意事项

1. 演示系统会自动处理日志系统的初始化和清理
2. 每个演示类别都是独立的，可以单独运行
3. 多进程演示需要确保配置文件路径正确
4. 性能测试结果可能因系统性能而异
5. 调用链显示需要在配置中启用 `show_call_chain: true` 